<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
   <mapper namespace="kr.co.gf.approval.dao.ApprovalDAO">
   
   <select id="loginIdName" resultType="String">
   		select name from emp where emp_no = #{loginId}
   </select>
   
   <select id="manager" resultType="String">
   		select name from emp where position = '지점장';
   </select>
   
   <select id="top_Manager" resultType="String">
   		select name from emp where position = '대표';
   </select>
   
   <select id="position">
   		select position from emp where emp_no = #{loginId}
   </select>
   
   <select id="approvalList" resultType="ApprovalDTO">
   		select a_idx, approval, subject, write_date, state from payment p where emp_no = #{loginId}
   </select>
   
   <insert 
   		useGeneratedKeys="true"
      	keyColumn="a_idx"
      	keyProperty="board_num"
   		id="eventRequestWrite">
   		
		insert into payment (emp_no, approval, subject, write_date, state, manager, top_manager)values(${emp_no},#{approval},#{subject},null,#{state},#{manager},#{top_manager})
   </insert>
   
   <insert id="approvalFileWrite" >
   		insert into wphoto (c_idx,new_photo_name,ori_photo_name,board_num) 
   		values(#{c_idx},#{new_photo_name},#{ori_photo_name},#{board_num})
   </insert>
   
   </mapper>